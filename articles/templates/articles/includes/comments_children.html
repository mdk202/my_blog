{% load static %}


{% for child_comment in comments %}
    <div class="media mt-4 editContent" id="child">
        {% if child_comment.user.image %}
            <img src="{{ child_comment.user.image.url }}" class="img-fluid rounded-circle" alt="Аватар пользователя" style="max-width:50px; height:auto;">
        {% else %}
            <img src="{% static "deps/images/avatar.png" %}" class="mr-3" alt="Аватар пользователя">
        {% endif %}
        <div class="media-body mt-2">
            <h5 class="user-comment">{{ child_comment.user }}</h5>
            <p class="text-comment">{{ child_comment.text_comment }}</p>
            <p class="date-comment text-muted">Дата создания: {{ child_comment.created_timestamp }}
                <a class="mx-5 reply-comment" href="#form-comments" onclick="addComment('{{ child_comment.user }}', '{{ child_comment.id }}')">Ответить</a>
            </p>
        </div>
        {% if child_comment.nested_children %}
            {% include 'articles/includes/comments_children.html' with comments=child_comment.nested_children %}
        {% endif %}
    </div>
{% endfor %}

<script>
    function addComment(user_id, comment_id) {
        document.getElementById("id_text_comment").innerText = `${user_id}, `;
        document.getElementById("id_comment_parent").value = comment_id
    }
</script>